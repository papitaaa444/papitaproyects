<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>üå∏ Mi Juego M√°gico üå∏</title>
  <style>
    body {
      background-color: #FFF0F5;
      font-family: Georgia, serif;
      text-align: center;
      color: #DB7093;
    }
    #bienvenida {
      padding: 50px;
    }
    .btn {
      display: inline-block;
      margin-top: 30px;
      padding: 15px 40px;
      background: #FFB6C1;
      color: white;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
    }
    .btn:hover {
      background: #FF69B4;
    }
  </style>
</head>
<body>

<div id="bienvenida">
  <h1>üå∏ Para mi persona favorita üå∏</h1>
  <p>He preparado este peque√±o rinc√≥n para ti.<br>¬øMe permites mostrarte?</p>
  <button class="btn" onclick="mostrarJuego1()">Comenzar Viaje ‚ú®</button>
</div>

<script>
function mostrarJuego1() {
  document.getElementById("bienvenida").style.display = "none";
  document.getElementById("juego1").style.display = "block";
}
</script>
<div id="juego1" style="display:none;">
  <h2>üíñ Primer Reto: Afecto</h2>
  <canvas id="canvasCorazones" width="600" height="350" style="border:2px solid pink; background:white;"></canvas>
  <p id="puntos">Puntos: 0/5</p>
</div>

<script>
let puntos = 0;
let ctx = document.getElementById("canvasCorazones").getContext("2d");
let corazones = [];

function lanzarCorazones() {
  if (puntos >= 5) return;
  let x = Math.random()*550+50;
  let y = Math.random()*300+50;
  let tipo = ["‚ù§Ô∏è","üíú","üíó","üå∏","‚ú®"][Math.floor(Math.random()*5)];
  corazones.push({x,y,tipo});
  dibujar();
  setTimeout(lanzarCorazones,700);
}

function dibujar() {
  ctx.clearRect(0,0,600,350);
  corazones.forEach(c=>{
    ctx.font="35px Arial";
    ctx.fillText(c.tipo,c.x,c.y);
  });
}

document.getElementById("canvasCorazones").addEventListener("click",function(e){
  let rect=this.getBoundingClientRect();
  let x=e.clientX-rect.left;
  let y=e.clientY-rect.top;
  corazones.forEach((c,i)=>{
    if(Math.abs(x-c.x)<20 && Math.abs(y-c.y)<20){
      if(c.tipo==="üíó"){
        puntos++;
        document.getElementById("puntos").innerText="Puntos: "+puntos+"/5";
        corazones.splice(i,1);
        if(puntos>=5){
          alert("¬°Has atrapado 5 corazones! ‚û°Ô∏è Siguiente desaf√≠o");
        }
      }
    }
  });
});

lanzarCorazones();
</script>
<div id="juego2" style="display:none;">
  <h2>üé® Encuentra el color oculto</h2>
  <p id="intentos">Te quedan 3 intentos</p>
  <div id="opciones">
    <button class="colorBtn" style="background:#ADD8E6;" onclick="verificarColor('Azul')">Azul</button>
    <button class="colorBtn" style="background:#FFB2B2;" onclick="verificarColor('Rojo')">Rojo</button>
    <button class="colorBtn" style="background:#C2F0C2;" onclick="verificarColor('Verde')">Verde</button>
    <button class="colorBtn" style="background:#FFFFE0;" onclick="verificarColor('Amarillo')">Amarillo</button>
  </div>
  <p id="mensaje"></p>
</div>

<style>
  .colorBtn {
    margin: 10px;
    padding: 15px;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    width: 100px;
  }
</style>

<script>
let intentos = 3;
let trollMsgs = [
  "¬øAzul como el mar? No creo... üåä",
  "El rojo es lindo, pero ¬øes ese? ‚ù§Ô∏è",
  "Verde esperanza... pero esperanza de ganar üåø"
];

function verificarColor(color) {
  intentos--;
  if(intentos > 0){
    document.getElementById("mensaje").innerText = trollMsgs[Math.floor(Math.random()*trollMsgs.length)];
    document.getElementById("intentos").innerText = "No... Intenta otra vez ("+intentos+")";
  } else {
    document.getElementById("opciones").innerHTML = "";
    document.getElementById("mensaje").innerText = "¬°Se acabaron los intentos! ü§≠";
    let btnTroll = document.createElement("button");
    btnTroll.innerText = "Tap tap aqu√≠, te equivocaste,\nera el color de fondo ü§°";
    btnTroll.style.background="#FFB6C1";
    btnTroll.style.padding="15px";
    btnTroll.style.marginTop="20px";
    btnTroll.onclick = mostrarRevelacionFinal;
    document.getElementById("opciones").appendChild(btnTroll);
  }
}

function mostrarRevelacionFinal(){
  document.getElementById("juego2").innerHTML = `
    <h2 style="color:white; background:#FFC0CB; padding:50px;">¬°Era obvio! El color era ROSADO üíó</h2>
    <button onclick="mostrarJuego3()" style="padding:15px; background:white; color:#FF69B4; border:none; border-radius:8px;">Continuar ‚ú®</button>
  `;
}
</script>
<div id="juego3" style="display:none; background:#0b132b; color:white; padding:30px;">
  <h2>üöÄ Viaje Estelar (El Principito)</h2>
  <p id="frase"></p>
  <div id="opcionesPrincipito"></div>
  <p id="estado"></p>
</div>

<script>
let frases = [
  {texto:"Lo esencial es invisible...", correcta:"a los ojos", opciones:["al coraz√≥n","a la mente","al alma"]},
  {texto:"Fue el tiempo que pasaste con tu...", correcta:"rosa", opciones:["planeta","zorro","orgullo"]},
  {texto:"Si vienes, por ejemplo, a las cuatro de la tarde, desde las tres empezar√© a ser...", correcta:"feliz", opciones:["puntual","inquieto","amigo"]},
  {texto:"Todas las personas mayores fueron al principio...", correcta:"ni√±os", opciones:["sabios","peque√±os","so√±adores"]}
];
let idxFrase = 0;

function mostrarJuego3(){
  document.getElementById("juego2").style.display="none";
  document.getElementById("juego3").style.display="block";
  mostrarFrase();
}

function mostrarFrase(){
  if(idxFrase>=frases.length){
    document.getElementById("juego3").innerHTML = `
      <h2 style="color:#ffca3a;">‚ú® ¬°Sabias palabras! ‚ú®</h2>
      <button onclick="mostrarJuego4()" style="padding:15px; background:#ffca3a; color:#0b132b; border:none; border-radius:8px;">Continuar el viaje üöÄ</button>
    `;
    return;
  }
  let f = frases[idxFrase];
  document.getElementById("frase").innerText = `"${f.texto}"`;
  let opciones = [...f.opciones, f.correcta];
  opciones.sort(()=>Math.random()-0.5);
  let html="";
  opciones.forEach(opt=>{
    html += `<button onclick="verificarPrincipito('${opt}')" style="margin:5px; padding:10px; background:#1c2541; color:white; border:none; border-radius:6px;">${opt}</button>`;
  });
  document.getElementById("opcionesPrincipito").innerHTML = html;
}

function verificarPrincipito(opcion){
  let f = frases[idxFrase];
  if(opcion===f.correcta){
    document.getElementById("estado").innerText="‚úÖ Correcto";
    idxFrase++;
    setTimeout(mostrarFrase,500);
  } else {
    document.getElementById("estado").innerText="‚ùå Intenta de nuevo";
  }
}
</script>
<div id="juego4" style="display:none; background:#0d1b2a; color:white; padding:20px;">
  <h2>‚ú® PROTEGE NUESTRO CIELO ‚ú®</h2>
  <canvas id="canvasEsquiva" width="600" height="450" style="background:#1b263b; border:2px solid #00d4ff;"></canvas>
  <p id="energia">Energ√≠a del Amor: 0%</p>
</div>

<script>
let canvasE = document.getElementById("canvasEsquiva");
let ctxE = canvasE.getContext("2d");
let corazon = {x:300,y:350};
let obstaculos = [];
let rayos = [];
let puntosE = 0;
let jugandoE = true;

canvasE.addEventListener("mousemove",function(e){
  let rect = canvasE.getBoundingClientRect();
  corazon.x = e.clientX - rect.left;
  corazon.y = e.clientY - rect.top;
});

function generarClima(){
  if(!jugandoE) return;
  let x = Math.random()*580+20;
  let tipos = ["‚òÅÔ∏è","‚õàÔ∏è","‚ùÑÔ∏è"];
  let tipo = tipos[Math.floor(Math.random()*tipos.length)];
  obstaculos.push({x:x,y:-50,tipo:tipo,vy:6+Math.random()*5,vx:(Math.random()*8-4)});
  if(Math.random()<0.3){
    let yR = Math.random()*350+50;
    rayos.push({x:-50,y:yR});
  }
  setTimeout(generarClima,250);
}

function dibujarEsquiva(){
  ctxE.clearRect(0,0,600,450);
  // coraz√≥n
  ctxE.font="28px Arial";
  ctxE.fillText("‚ù§Ô∏è",corazon.x,corazon.y);
  // obstaculos
  obstaculos.forEach(o=>{
    ctxE.font="35px Arial";
    ctxE.fillText(o.tipo,o.x,o.y);
    o.x+=o.vx;
    o.y+=o.vy;
    if(Math.abs(corazon.x-o.x)<35 && Math.abs(corazon.y-o.y)<35){
      puntosE=Math.max(0,puntosE-5);
    }
  });
  obstaculos=obstaculos.filter(o=>o.y<500);
  // rayos
  rayos.forEach(r=>{
    ctxE.font="30px Arial";
    ctxE.fillStyle="#ffd60a";
    ctxE.fillText("‚ö°",r.x,r.y);
    ctxE.fillStyle="black";
    r.x+=15;
    if(Math.abs(corazon.x-r.x)<30 && Math.abs(corazon.y-r.y)<30){
      puntosE=Math.max(0,puntosE-15);
    }
  });
  rayos=rayos.filter(r=>r.x<650);
  // progreso
  puntosE+=0.35;
  let energia=Math.min(100,puntosE);
  document.getElementById("energia").innerText="Energ√≠a del Amor: "+Math.floor(energia)+"%";
  if(energia>=100){
    jugandoE=false;
    document.getElementById("juego4").innerHTML=`
      <h2 style="color:#00d4ff;">¬°CIELO DESPEJADO! ‚ú®</h2>
      <button onclick="mostrarJuego5()" style="padding:15px; background:#00d4ff; color:black; border:none; border-radius:8px;">SIGUIENTE RETO ‚ûî</button>
    `;
  }
  if(jugandoE) requestAnimationFrame(dibujarEsquiva);
}

generarClima();
dibujarEsquiva();
</script>
<div id="juego5" style="display:none; background:#FFF5EE; color:#FF1493; padding:20px;">
  <h2>üíñ Laberinto M√°gico Din√°mico</h2>
  <p id="vidas">Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</p>
  <canvas id="canvasLaberinto" width="600" height="400" style="background:#FFF0F5; border:4px solid #FFB6C1;"></canvas>
</div>

<script>
let canvasL = document.getElementById("canvasLaberinto");
let ctxL = canvasL.getContext("2d");
let jugador = {x:30,y:40};
let vidas = 3;
let meta = {x:530,y:340,w:50,h:50};
let muros = [
  {x:0,y:100,w:450,h:15,dir:1},
  {x:150,y:200,w:450,h:15,dir:-1},
  {x:0,y:300,w:450,h:15,dir:1}
];
let obstaculos = [
  {x:300,y:150,vx:8,vy:3,text:"‚ú®"},
  {x:300,y:250,vx:-8,vy:-3,text:"üí´"}
];
let jugandoL = true;

canvasL.addEventListener("mousemove",function(e){
  let rect=canvasL.getBoundingClientRect();
  jugador.x=e.clientX-rect.left;
  jugador.y=e.clientY-rect.top;
});

function dibujarLaberinto(){
  ctxL.clearRect(0,0,600,400);
  // meta
  ctxL.fillStyle="#FF1493";
  ctxL.beginPath();
  ctxL.arc(meta.x+25,meta.y+25,25,0,Math.PI*2);
  ctxL.fill();
  // jugador
  ctxL.font="22px Arial";
  ctxL.fillText("üíñ",jugador.x,jugador.y);
  // muros
  ctxL.fillStyle="#FF69B4";
  muros.forEach(m=>{
    ctxL.fillRect(m.x,m.y,m.w,m.h);
    m.w+=2*m.dir;
    if(m.w>550||m.w<350) m.dir*=-1;
    if(jugador.x>m.x && jugador.x<m.x+m.w && jugador.y>m.y && jugador.y<m.y+m.h){
      morir();
    }
  });
  // obstaculos
  obstaculos.forEach(o=>{
    ctxL.font="25px Arial";
    ctxL.fillText(o.text,o.x,o.y);
    o.x+=o.vx; o.y+=o.vy;
    if(o.x>580||o.x<20) o.vx*=-1;
    if(o.y>380||o.y<20) o.vy*=-1;
    if(Math.abs(jugador.x-o.x)<25 && Math.abs(jugador.y-o.y)<25){
      morir();
    }
  });
  // victoria
  if(jugador.x>meta.x && jugador.x<meta.x+meta.w && jugador.y>meta.y && jugador.y<meta.y+meta.h){
    victoriaL();
  }
  if(jugandoL) requestAnimationFrame(dibujarLaberinto);
}

function morir(){
  vidas--;
  document.getElementById("vidas").innerText="Vidas: "+("‚ù§Ô∏è ".repeat(vidas));
  jugador.x=30; jugador.y=40;
  if(vidas<=0){
    vidas=3;
    document.getElementById("vidas").innerText="Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è";
  }
}

function victoriaL(){
  jugandoL=false;
  document.getElementById("juego5").innerHTML=`
    <h2 style="color:#FF69B4;">¬°ERES INCRE√çBLE! ‚ù§Ô∏è</h2>
    <button onclick="mostrarJuego6()" style="padding:15px; background:#FF69B4; color:white; border:none; border-radius:8px;">VER REGALO FINAL üéÅ</button>
  `;
}

dibujarLaberinto();
</script>
<div id="juego6" style="display:none; background:#FFF9FB; padding:20px;">
  <h2 style="color:#DB7093;">üå∏ Jard√≠n Final üå∏</h2>
  <canvas id="canvasJardin" width="800" height="650" style="background:#FFF9FB; border:none;"></canvas>
</div>

<script>
let canvasJ = document.getElementById("canvasJardin");
let ctxJ = canvasJ.getContext("2d");
let coloresTulipan = ["#FFB6C1","#DB7093","#FF69B4","#FF1493","#FFC0CB"];

function dibujarTulipan(x,y){
  let color = coloresTulipan[Math.floor(Math.random()*coloresTulipan.length)];
  // tallo
  ctxJ.strokeStyle="#7FB07F";
  ctxJ.lineWidth=3;
  ctxJ.beginPath();
  ctxJ.moveTo(x,y);
  ctxJ.lineTo(x,y+130);
  ctxJ.stroke();
  // p√©talos simples
  ctxJ.fillStyle=color;
  ctxJ.beginPath();
  ctxJ.arc(x,y,20,0,Math.PI*2);
  ctxJ.fill();
}

function dibujarEscena(){
  ctxJ.clearRect(0,0,800,650);
  ctxJ.fillStyle="#DB7093";
  ctxJ.font="30px Georgia";
  ctxJ.fillText("Para mi lugar seguro...",300,80);
  ctxJ.fillStyle="#BC8F8F";
  ctxJ.font="14px Arial";
  ctxJ.fillText("Eres lo m√°s bonito de mi vida.",300,130);
  for(let i=0;i<25;i++){
    dibujarTulipan(Math.random()*700+50,Math.random()*170+350);
  }
}

function lluviaPetalos(){
  let x=Math.random()*800;
  let y=-10;
  let size=10+Math.random()*10;
  let petalo={x,y,size};
  function caer(){
    ctxJ.font=petalo.size+"px Arial";
    ctxJ.fillText("üå∏",petalo.x,petalo.y);
    petalo.y+=2;
    if(petalo.y<650){
      requestAnimationFrame(caer);
    }
  }
  caer();
  setTimeout(lluviaPetalos,500);
}

function brillos(){
  let x=Math.random()*780+20;
  let y=Math.random()*550+50;
  ctxJ.font="12px Arial";
  ctxJ.fillStyle="#FFD700";
  ctxJ.fillText("‚ú®",x,y);
  setTimeout(()=>{brillos();},400);
}

dibujarEscena();
lluviaPetalos();
brillos();
</script>
<div id="juego7" style="display:none; background:#121212; color:white; padding:20px;">
  <h2 style="color:#1DB954;">üéµ Trivia Musical üéµ</h2>
  <p id="pregunta"></p>
  <div id="opcionesTrivia"></div>
</div>

<script>
let preguntasTrivia = [
  {p:"¬øQui√©n es conocido como el 'Rey del Pop'?", correcta:"Michael Jackson", opciones:["Elvis Presley","Michael Jackson","Prince","Bruno Mars"]},
  {p:"¬øA qu√© g√©nero pertenece la famosa canci√≥n 'Bohemian Rhapsody'?", correcta:"Rock", opciones:["Pop","Jazz","Rock","√ìpera"]},
  {p:"¬øA qu√© artista apodan cari√±osamente como 'El Sol de M√©xico'?", correcta:"Luis Miguel", opciones:["Alejandro Fern√°ndez","Luis Miguel","Chayanne","Cristian Castro"]}
];
let idxTrivia = 0;

function mostrarJuego6(){
  document.getElementById("juego6").style.display="none";
  document.getElementById("juego7").style.display="block";
  mostrarPreguntaTrivia();
}

function mostrarPreguntaTrivia(){
  if(idxTrivia>=preguntasTrivia.length){
    document.getElementById("juego7").innerHTML=`
      <h2 style="color:#1DB954;">¬°Has completado la Trivia Musical! üé∂</h2>
      <button onclick="mostrarJuego8()" style="padding:15px; background:#1DB954; color:white; border:none; border-radius:8px;">Continuar ‚û°Ô∏è</button>
    `;
    return;
  }
  let q = preguntasTrivia[idxTrivia];
  document.getElementById("pregunta").innerText=q.p;
  let html="";
  q.opciones.forEach(opt=>{
    html += `<button onclick="verificarTrivia('${opt}')" style="margin:5px; padding:10px; background:#282828; color:white; border:none; border-radius:6px;">${opt}</button>`;
  });
  document.getElementById("opcionesTrivia").innerHTML=html;
}

function verificarTrivia(opcion){
  let q = preguntasTrivia[idxTrivia];
  if(opcion===q.correcta){
    idxTrivia++;
    mostrarPreguntaTrivia();
  } else {
    alert("‚ùå Incorrecto, intenta otra vez");
  }
}
</script>
<div id="juego8" style="display:none; background:#1a1a1a; color:white; padding:20px;">
  <h2 style="color:#FF4B2B;">üé§ Completa la letra üé§</h2>
  <p id="tituloLetra" style="font-style:italic; color:#cccccc;"></p>
  <p id="fraseLetra" style="font-weight:bold;"></p>
  <div id="opcionesLetra"></div>
</div>

<script>
let retosLetra = [
  {
    titulo:"Ahora te puedes marchar - Luis Miguel",
    frase:"Si t√∫ me hubieras dicho siempre la verdad...",
    correcta:"si hubieras respondido cuando te llam√©",
    opciones:["si no te hubieras ido de mi lado","si hubieras respondido cuando te llam√©","si me hubieras amado un poco m√°s"]
  },
  {
    titulo:"Yellow - Coldplay",
    frase:"Look at the stars, look how they shine for...",
    correcta:"you",
    opciones:["us","me","you"]
  }
];
let idxLetra = 0;

function mostrarJuego8(){
  document.getElementById("juego7").style.display="none";
  document.getElementById("juego8").style.display="block";
  mostrarLetra();
}

function mostrarLetra(){
  if(idxLetra>=retosLetra.length){
    document.getElementById("juego8").innerHTML=`
      <h2 style="color:#FF4B2B;">¬°Has completado el reto musical! üé∂</h2>
      <button onclick="mostrarJuego9()" style="padding:15px; background:#FF4B2B; color:white; border:none; border-radius:8px;">Continuar ‚û°Ô∏è</button>
    `;
    return;
  }
  let r = retosLetra[idxLetra];
  document.getElementById("tituloLetra").innerText=r.titulo;
  document.getElementById("fraseLetra").innerText=r.frase;
  let html="";
  r.opciones.forEach(opt=>{
    html += `<button onclick="verificarLetra('${opt}')" style="margin:5px; padding:10px; background:#333333; color:white; border:none; border-radius:6px; width:300px;">${opt}</button><br>`;
  });
  document.getElementById("opcionesLetra").innerHTML=html;
}

function verificarLetra(opcion){
  let r = retosLetra[idxLetra];
  if(opcion===r.correcta){
    idxLetra++;
    mostrarLetra();
  } else {
    alert("‚ùå Incorrecto, intenta otra vez");
  }
}
</script>
<div id="juego9" style="display:none; background:#ffffff; color:#333; padding:20px;">
  <h2>üïµÔ∏è Adivina el Artista por Emojis</h2>
  <p id="emojiArtista" style="font-size:40px;"></p>
  <input id="entradaArtista" type="text" placeholder="Escribe tu respuesta..." style="padding:10px; font-size:16px; text-align:center; width:300px;">
  <button onclick="verificarArtista()" style="margin-top:10px; padding:10px; background:#4CAF50; color:white; border:none; border-radius:6px;">Comprobar</button>
  <p id="errorArtista" style="color:red;"></p>
</div>

<script>
let retosArtista = [
  {emoji:"‚òÄÔ∏è üá≤üáΩ üéôÔ∏è", correcta:"Luis Miguel"},
  {emoji:"üåô üé§ üë±üèª‚Äç‚ôÄÔ∏è üíÖ", correcta:"Ariana Grande"},
  {emoji:"üê∞ üî• üî´ ‚ú®", correcta:"bad bunny"}
];
let idxArtista = 0;

function mostrarJuego9(){
  document.getElementById("juego8").style.display="none";
  document.getElementById("juego9").style.display="block";
  mostrarArtista();
}

function mostrarArtista(){
  if(idxArtista>=retosArtista.length){
    document.getElementById("juego9").innerHTML=`
      <h2>üéâ ¬°Has adivinado todos los artistas! üéâ</h2>
      <button onclick="mostrarJuego10()" style="padding:15px; background:#FF69B4; color:white; border:none; border-radius:8px;">Continuar ‚û°Ô∏è</button>
    `;
    return;
  }
  let r = retosArtista[idxArtista];
  document.getElementById("emojiArtista").innerText=r.emoji;
  document.getElementById("entradaArtista").value="";
  document.getElementById("errorArtista").innerText="";
}

function verificarArtista(){
  let r = retosArtista[idxArtista];
  let respuesta = document.getElementById("entradaArtista").value.trim().toLowerCase();
  if(respuesta===r.correcta.toLowerCase()){
    idxArtista++;
    mostrarArtista();
  } else {
    document.getElementById("errorArtista").innerText="¬°Casi! Intenta de nuevo";
  }
}
</script>
<div id="juego10" style="display:none; background:#000033; color:white; padding:20px;">
  <h2 style="color:#FFD700;">üéâ ¬°Felicidades! üéâ</h2>
  <canvas id="canvasFuegos" width="800" height="650" style="background:#000033;"></canvas>
</div>

<script>
let canvasF = document.getElementById("canvasFuegos");
let ctxF = canvasF.getContext("2d");
let particulas = [];

function lanzarFuego(){
  let x = Math.random()*800;
  let y = Math.random()*300+100;
  let color = ["#FFD700","#FF4500","#FF00FF","#00FFFF","#ADFF2F","#FFFFFF"][Math.floor(Math.random()*6)];
  for(let i=0;i<50;i++){
    particulas.push({
      x:x,y:y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      vida:100,
      color:color
    });
  }
  setTimeout(lanzarFuego,1500);
}

function dibujarFuegos(){
  ctxF.clearRect(0,0,800,650);
  particulas.forEach(p=>{
    ctxF.fillStyle=p.color;
    ctxF.fillRect(p.x,p.y,2,2);
    p.x+=p.vx;
    p.y+=p.vy;
    p.vida--;
  });
  particulas=particulas.filter(p=>p.vida>0);
  requestAnimationFrame(dibujarFuegos);
}

lanzarFuego();
dibujarFuegos();
</script>
<div id="cartaFinal" style="display:none; background:#FFFAF0; padding:0; position:relative;">
  <canvas id="canvasCarta" width="800" height="650" style="background:#FFFAF0; display:block; margin:0 auto;"></canvas>

  <!-- Caja de carta sobre el canvas -->
  <div id="cartaBox" style="
      position:absolute; left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:600px; max-width:90%;
      background:#FFEFF4; border:2px solid #FFC0CB; border-radius:12px;
      box-shadow:0 10px 25px rgba(219,112,147,0.25);
      color:#505050; text-align:center; padding:24px;">
    <h3 style="margin:0 0 12px; color:#DB7093; font-family:Georgia, serif;">Mi carta especial...</h3>
    <div style="font-family:Verdana, sans-serif; font-size:14px; line-height:1.6; text-align:justify; color:#505050; max-height:320px; overflow:auto;">
      Quiz√° te demuestro muy poco y quiz√° esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento.
      Realmente, hay muchas cosas que siento y que quisiera expresar, pero creo que de verdad me quedo corta, jajaja, ir√≥nico ¬øcierto?
      Haciendo esto cayeron varias de mis l√°grimas, no lo voy a negar. Muchas cosas me asustan y, entre esas, que me destrocen, porque una vez ya llegu√© a eso.
      Al menos, si llego a caer ah√≠ otra vez, que no sea por ti, por favor. Quiero algo bonito e igual siento que quiz√° si no funciona pueda ser porque soy yo el problema.
      Siendo as√≠, te pido disculpas, quiz√° por el miedo a llorar me limit√© a ciertas cosas. Bueno, pero quiero que sepas que hay muchos sentimientos,
      muchas emociones que me haces sentir. Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme.
      S√© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor. ¬°Muakkkk!
    </div>
    <button onclick="finalizarCarta()" style="
        margin-top:16px; padding:10px 18px; border:none; border-radius:8px;
        background:#FF69B4; color:white; font-weight:bold; cursor:pointer;">
      Finalizar con un abrazo virtual ü§ó
    </button>
  </div>
</div>

<script>
function mostrarCarta(){
  // Oculta pantalla anterior y muestra la carta
  if(document.getElementById("juego10")) document.getElementById("juego10").style.display="none";
  document.getElementById("cartaFinal").style.display="block";
  iniciarCorazonesCarta();
}

function finalizarCarta(){
  // Cierra carta: puedes redirigir al inicio o a un mensaje final
  document.getElementById("cartaFinal").innerHTML = `
    <div style="height:650px; display:flex; align-items:center; justify-content:center; flex-direction:column; background:#FFFAF0; color:#DB7093;">
      <h2 style="font-family:Georgia, serif;">Gracias por leer üíå</h2>
      <p style="color:#BC8F8F;">Lo esencial es invisible a los ojos ‚ú®</p>
    </div>
  `;
}

// Animaci√≥n de corazones flotando en canvas
let cartaCanvas, cartaCtx, corazonesCarta = [], animCartaId;

function iniciarCorazonesCarta(){
  cartaCanvas = document.getElementById("canvasCarta");
  cartaCtx = cartaCanvas.getContext("2d");
  corazonesCarta = [];
  for(let i=0; i<28; i++) crearCorazonFlotante();
  animarCorazonesCarta();
  // Seguir creando nuevos lentamente
  setInterval(crearCorazonFlotante, 1200);
}

function crearCorazonFlotante(){
  const x = Math.random() * cartaCanvas.width;
  const y = cartaCanvas.height + Math.random()*120;
  const size = 18 + Math.random()*12;
  const vx = (Math.random()*1.0 - 0.5);     // leve deriva horizontal
  const vy = -(1.2 + Math.random()*1.8);    // ascenso
  const color = ["#FFB6C1","#FFC0CB","#DB7093"][Math.floor(Math.random()*3)];
  corazonesCarta.push({x,y,size,vx,vy,color});
}

function dibujarCorazon(ctx, x, y, s, color){
  // Emoji para simplicidad
  ctx.font = `${s}px Arial`;
  ctx.fillStyle = color;
  ctx.fillText("üíó", x, y);
}

function animarCorazonesCarta(){
  cartaCtx.clearRect(0,0,cartaCanvas.width, cartaCanvas.height);

  // Brillos sutiles
  for(let i=0;i<6;i++){
    cartaCtx.font = "12px Arial";
    cartaCtx.fillStyle = "#FFD700";
    cartaCtx.fillText("‚ú®", Math.random()*cartaCanvas.width, Math.random()*cartaCanvas.height);
  }

  // Mover y dibujar corazones
  for(let i=corazonesCarta.length-1; i>=0; i--){
    const c = corazonesCarta[i];
    c.x += c.vx;
    c.y += c.vy;
    dibujarCorazon(cartaCtx, c.x, c.y, c.size, c.color);
    // Reciclar si salen arriba
    if(c.y < -40) corazonesCarta.splice(i,1);
  }

  animCartaId = requestAnimationFrame(animarCorazonesCarta);
}
</script>


