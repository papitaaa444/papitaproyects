<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para Mi Persona Favorita ğŸŒ¸</title>
    <style>
        :root {
            --rosa: #ff85a2; --rosa-fuerte: #ff4d6d; --magenta: #c9184a;
            --bg: linear-gradient(-45deg, #fff0f5, #ffe5ec, #ffc2d1, #ffb3c1);
        }
        * { box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
        body { 
            margin: 0; font-family: 'Georgia', serif; 
            background: var(--bg); background-size: 400% 400%; 
            animation: gradientBG 15s ease infinite; 
            height: 100vh; width: 100vw; overflow: hidden;
        }
        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        .pantalla { 
            display: none; padding: 20px; text-align: center; 
            height: 100vh; overflow-y: auto; -webkit-overflow-scrolling: touch;
        }

        .card { 
            background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); 
            border-radius: 25px; padding: 20px; border: 2px solid white; 
            box-shadow: 0 10px 30px rgba(219, 112, 147, 0.2); 
            max-width: 380px; margin: 10px auto 80px auto; 
        }

        .btn { 
            margin: 10px; padding: 15px 25px; border: none; border-radius: 50px; 
            font-weight: bold; cursor: pointer; background: var(--rosa); color: white; 
            box-shadow: 0 4px 15px rgba(255, 77, 109, 0.3); font-size: 16px;
        }
        
        .btn-skip { background: #ccc; font-size: 12px; padding: 8px 15px; opacity: 0.7; }

        canvas { 
            background: white; border-radius: 15px; border: 2px solid #ffc2d1; 
            width: 100%; max-width: 320px; height: auto; aspect-ratio: 1/1.2;
        }

        .dark { background: #000014 !important; color: white !important; }
        .dark .card { background: rgba(255,255,255,0.1); color: white; border-color: #444; }

        .tulip { font-size: 50px; display: inline-block; animation: sway 3s ease-in-out infinite; }
        @keyframes sway { 0%, 100% { transform: rotate(-10deg); } 50% { transform: rotate(10deg); } }

        .playlist { list-style: none; padding: 0; text-align: left; font-size: 14px; }
        .playlist li { margin: 8px 0; padding: 10px; border-radius: 10px; background: rgba(255,255,255,0.1); border-left: 4px solid var(--rosa); }
    </style>
</head>
<body>

<section id="bienvenida" class="pantalla" style="display:block;">
    <div class="card" style="margin-top: 15vh;">
        <h1 style="color:var(--magenta)">Â¡Hola, Mi Amor! âœ¨</h1>
        <p>He preparado esta sorpresa para ti. Avanza con cuidado y diviÃ©rtete.</p>
        <button class="btn" onclick="mostrar('juego1')">Empezar Aventura ğŸŒ¸</button>
    </div>
</section>

<section id="juego1" class="pantalla">
    <div class="card">
        <div id="ronda1">
            <h2>Dibuja algo lindo ğŸ¨</h2>
            <canvas id="canvasDibujo" width="350" height="420"></canvas>
            <button class="btn" onclick="pasarRonda(1)">Siguiente â¡ï¸</button>
        </div>
        <div id="ronda2" style="display:none;">
            <h2>Pinta mi corazÃ³n â¤ï¸</h2>
            <canvas id="canvasFill" width="350" height="420"></canvas>
            <button class="btn" onclick="pasarRonda(2)">Â¡Listo! â¡ï¸</button>
        </div>
        <div id="ronda3" style="display:none;">
            <h2>Atrapa los ROSAS ğŸ’—</h2>
            <p id="puntos">Puntos: 0/10</p>
            <canvas id="canvasCorazones" width="350" height="420"></canvas>
            <button class="btn btn-skip" onclick="mostrar('juegoLaberinto')">Saltar juego â¡ï¸</button>
        </div>
    </div>
</section>

<section id="juegoLaberinto" class="pantalla">
    <div class="card">
        <h2>El Laberinto ğŸ§­</h2>
        <p>Lleva el â¤ï¸ a la ğŸŒŸ sin tocar lo rosa</p>
        <canvas id="canvasLab" width="350" height="400"></canvas>
        <button class="btn btn-skip" onclick="mostrar('juegoColor')">Saltar Laberinto â¡ï¸</button>
    </div>
</section>

<section id="juegoColor" class="pantalla">
    <div class="card">
        <h2>Â¿Color de hoy? ğŸ¨</h2>
        <button class="btn" style="background:#87CEEB" onclick="alert('Nop')">Azul</button>
        <button class="btn" style="background:#E6E6FA; color:black" onclick="ganarColor()">Â¿Lavanda?</button>
        <div id="secreto" style="display:none; margin-top:20px;">
            <p>Â¡Eres mi ROSA favorita!</p>
            <button class="btn" onclick="mostrar('juegoPrincipito')">Continuar ğŸŒ¹</button>
        </div>
    </div>
</section>

<section id="juegoPrincipito" class="pantalla dark">
    <div class="card">
        <h2>ğŸŒ¹ El Principito</h2>
        <p>"Fue el tiempo que pasaste con tu rosa lo que la hizo tan importante."</p>
        <p>Â¿QuÃ© es lo esencial?</p>
        <button class="btn" onclick="mostrar('juegoCielo')">Lo invisible a los ojos â¤ï¸</button>
        <button class="btn" onclick="alert('Casi...')">La belleza fÃ­sica</button>
    </div>
</section>

<section id="juegoCielo" class="pantalla dark">
    <div class="card">
        <h2>âœ¨ Esquiva las nubes</h2>
        <p id="enText">EnergÃ­a: 0%</p>
        <canvas id="canvasCielo" width="350" height="400"></canvas>
        <button class="btn btn-skip" onclick="mostrar('juegoMusica')">Saltar â¡ï¸</button>
    </div>
</section>

<section id="juegoMusica" class="pantalla">
    <div class="card">
        <h2>ğŸ¤ Trivia Musical</h2>
        <p>"If the world was ending, I'd wanna be..."</p>
        <button class="btn" onclick="mostrar('juegoArtista')">Next to you ğŸ‘©â€â¤ï¸â€ğŸ‘¨</button>
        <hr>
        <p>Â¿QuiÃ©n es? â˜€ï¸ ğŸŒŠ ğŸ•¶ï¸ ğŸ°</p>
        <input type="text" id="ans1" placeholder="Nombre..." style="padding:10px; border-radius:10px; width:80%;">
        <button class="btn" onclick="checkFinal()">Comprobar</button>
    </div>
</section>

<section id="jardinTulipanes" class="pantalla">
    <div class="card" style="border: 4px solid #81c784;">
        <h2 style="color:#2e7d32">ğŸŒ· Tu JardÃ­n Propio</h2>
        <p><i>"Un jardÃ­n de amor infinito, creado solo para la flor mÃ¡s bella del mundo."</i></p>
        <div id="jardinCont">
            <span class="tulip">ğŸŒ·</span><span class="tulip">ğŸŒ·</span><span class="tulip">ğŸŒ·</span>
        </div>
        <button class="btn" style="background:#4caf50" onclick="mostrar('juegoFinal')">Ver Fuegos Artificiales â¡ï¸</button>
    </div>
</section>

<section id="juegoFinal" class="pantalla dark">
    <div class="card">
        <h2 style="color:var(--rosa)">Â¡FELICIDADES! ğŸ‰</h2>
        <canvas id="canvasFuegos" width="350" height="200" style="border:none; background:transparent;"></canvas>
        <ul class="playlist">
            <li>ğŸµ The Boy Is Mine - Ariana Grande</li>
            <li>ğŸµ Lo Que Siento - Cuco</li>
            <li>ğŸµ Te AmarÃ© - Silvio RodrÃ­guez</li>
            <li>ğŸµ Obsesionado - Farruko</li>
            <li>ğŸµ Die With A Smile - Lady Gaga</li>
        </ul>
        <button class="btn" style="width:100%" onclick="mostrar('carta')">LEER MI CARTA ğŸ’Œ</button>
    </div>
</section>

<section id="carta" class="pantalla">
    <div class="card" style="text-align:left; background:#fffaf0;">
        <h2 style="text-align:center; color:var(--magenta)">Mi Amor â¤ï¸</h2>
        <p>QuizÃ¡ te demuestro muy poco y quizÃ¡ esto no sea nada, pero para mÃ­ lo es todo.</p>
        <p>Me haces feliz de una forma que no puedo explicar. Gracias por aguantarme, por estar ahÃ­ y por ser tÃº.</p>
        <p>Eres mi persona favorita en todo el universo.</p>
        <p style="text-align:right; font-weight:bold; color:var(--magenta);">Te quiero muchÃ­simo. ğŸŒ¸</p>
        <button class="btn" onclick="location.reload()" style="width:100%">Reiniciar</button>
    </div>
</section>

<script>
    function mostrar(id){
        document.querySelectorAll('.pantalla').forEach(p => p.style.display = 'none');
        const p = document.getElementById(id);
        p.style.display = 'block';
        p.scrollTop = 0; // SUBIR AL PRINCIPIO
        if(id === 'juegoLaberinto') iniciarLab();
        if(id === 'juegoCielo') iniciarCielo();
        if(id === 'juegoFinal') iniciarFuegos();
    }

    function getPos(e, c) {
        const r = c.getBoundingClientRect();
        const t = e.touches ? e.touches[0] : e;
        return { x: (t.clientX - r.left) * (c.width / r.width), y: (t.clientY - r.top) * (c.height / r.height) };
    }

    // DIBUJO
    const cvD = document.getElementById("canvasDibujo"), cxD = cvD.getContext("2d");
    let d=false;
    cvD.addEventListener("touchstart", (e)=>{ e.preventDefault(); d=true; cxD.beginPath(); const p=getPos(e,cvD); cxD.moveTo(p.x,p.y); });
    cvD.addEventListener("touchmove", (e)=>{ if(!d)return; const p=getPos(e,cvD); cxD.lineTo(p.x,p.y); cxD.strokeStyle="#ff85a2"; cxD.lineWidth=5; cxD.stroke(); });
    cvD.addEventListener("touchend", ()=>d=false);

    // RELLENO
    const cvF = document.getElementById("canvasFill"), cxF = cvF.getContext("2d");
    function iniciarF() { cxF.fillStyle="#f0f0f0"; cxF.font="350px Arial"; cxF.textAlign="center"; cxF.textBaseline="middle"; cxF.fillText("â¤", 175, 210); }
    cvF.addEventListener("touchmove", (e)=>{ e.preventDefault(); const p=getPos(e,cvF); cxF.globalCompositeOperation="source-atop"; cxF.fillStyle="#ff4d6d"; cxF.beginPath(); cxF.arc(p.x,p.y,40,0,Math.PI*2); cxF.fill(); });
    iniciarF();

    // CORAZONES
    const cvC = document.getElementById("canvasCorazones"), cxC = cvC.getContext("2d");
    let pts=0, lC=[];
    function spawnC() {
        if(pts>=10 || document.getElementById('ronda3').style.display==='none') return;
        lC.push({x:Math.random()*300+25, y:-50, col: Math.random()>0.5?"#ff85a2":"#add8e6"});
        setTimeout(spawnC, 600);
    }
    function loopC() {
        cxC.clearRect(0,0,350,420);
        lC.forEach((c,i)=>{ c.y+=4; cxC.font="40px Arial"; cxC.fillText(c.col==="#ff85a2"?"ğŸ’—":"ğŸ’™", c.x, c.y); });
        if(document.getElementById('ronda3').style.display==='block') requestAnimationFrame(loopC);
    }
    cvC.addEventListener("touchstart", (e)=>{
        const p=getPos(e,cvC);
        lC.forEach((c,i)=>{ if(Math.hypot(p.x-c.x, p.y-(c.y-25))<45){ if(c.col==="#ff85a2") pts++; else pts=Math.max(0,pts-1); lC.splice(i,1); document.getElementById('puntos').innerText=`Puntos: ${pts}/10`; if(pts>=10) mostrar('juegoLaberinto'); } });
    });

    function pasarRonda(n) {
        if(n===1) { document.getElementById("ronda1").style.display="none"; document.getElementById("ronda2").style.display="block"; }
        if(n===2) { document.getElementById("ronda2").style.display="none"; document.getElementById("ronda3").style.display="block"; spawnC(); loopC(); }
    }

    // LABERINTO
    function iniciarLab() {
        const cvL=document.getElementById("canvasLab"), cxL=cvL.getContext("2d");
        let pL={x:30, y:30};
        function draw(){
            cxL.clearRect(0,0,350,400); cxL.fillStyle="#ff85a2"; cxL.fillRect(0,80,250,25); cxL.fillRect(100,180,250,25); cxL.fillRect(0,280,250,25);
            cxL.font="30px Arial"; cxL.fillText("â¤ï¸", pL.x-15, pL.y+10); cxL.fillText("ğŸŒŸ", 310, 370);
        }
        cvL.addEventListener("touchmove", (e)=>{ e.preventDefault(); const p=getPos(e,cvL); const d=cxL.getImageData(p.x,p.y,1,1).data; if(d[0]===255) pL={x:30,y:30}; else pL=p; if(pL.x>300 && pL.y>340) mostrar('juegoColor'); draw(); });
        draw();
    }

    // CIELO
    function iniciarCielo() {
        const cvS=document.getElementById("canvasCielo"), cxS=cvS.getContext("2d");
        let en=0, pS={x:175,y:350}, obs=[];
        cvS.addEventListener("touchmove",(e)=>{e.preventDefault(); pS=getPos(e,cvS);});
        function loop(){
            cxS.clearRect(0,0,350,400); cxS.font="30px Arial"; cxS.fillText("â¤ï¸", pS.x-15, pS.y);
            if(Math.random()<0.1) obs.push({x:Math.random()*320, y:-30});
            obs.forEach((o,i)=>{ o.y+=7; cxS.fillText("â˜ï¸", o.x, o.y); if(Math.hypot(pS.x-o.x, pS.y-o.y)<35){ en=Math.max(0,en-10); obs.splice(i,1); } });
            en+=0.4; document.getElementById("enText").innerText=`EnergÃ­a: ${Math.floor(en)}%`;
            if(en>=100) mostrar('juegoMusica'); if(document.getElementById('juegoCielo').style.display==='block') requestAnimationFrame(loop);
        }
        loop();
    }

    // FUEGOS
    function iniciarFuegos() {
        const cvH=document.getElementById("canvasFuegos"), cxH=cvH.getContext("2d");
        let ps=[];
        setInterval(()=>{ for(let i=0;i<30;i++) ps.push({x:Math.random()*350, y:Math.random()*100, vx:(Math.random()-0.5)*10, vy:(Math.random()-0.5)*10, c:`hsl(${Math.random()*360},100%,70%)`, a:1}); }, 1000);
        function loop(){
            cxH.clearRect(0,0,350,200); ps.forEach((p,i)=>{ p.x+=p.vx; p.y+=p.vy; p.vy+=0.2; p.a-=0.015; cxH.globalAlpha=p.a; cxH.fillStyle=p.c; cxH.fillRect(p.x,p.y,3,3); if(p.a<=0) ps.splice(i,1); });
            requestAnimationFrame(loop);
        }
        loop();
    }

    function ganarColor() { document.getElementById("secreto").style.display="block"; }
    function checkFinal() { if(document.getElementById("ans1").value.toLowerCase().includes("bad")) mostrar('jardinTulipanes'); }
</script>
</body>
</html>
