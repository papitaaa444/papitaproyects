<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>El Mundo de mi Ni√±o üå∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <style>
    :root {
      --rosa: #FF69B4; --rosa-fuerte: #C71585; --bg: #FFF0F5; --oro: #ffd700;
    }
    * { box-sizing: border-box; touch-action: none; }
    body { 
      margin: 0; font-family: 'Comic Sans MS', cursive, sans-serif; 
      background: var(--bg); overflow: hidden; width: 100vw; height: 100vh;
    }

    .pantalla { 
      display: none; padding: 20px; text-align: center; 
      height: 100vh; width: 100%; position: relative; overflow-y: auto;
    }

    /* Botones m√°gicos */
    .btn { 
      padding: 18px 25px; border: none; border-radius: 50px; 
      font-weight: bold; cursor: pointer; font-size: 16px;
      background: linear-gradient(45deg, var(--rosa), var(--rosa-fuerte));
      color: white; margin: 15px auto; width: 85%; display: block;
      box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4);
    }

    .card { 
      background: rgba(255, 255, 255, 0.9); padding: 20px; 
      border-radius: 25px; border: 3px dashed var(--rosa-fuerte);
      margin: 10px auto; max-width: 90%;
    }

    canvas { 
      display: block; margin: 0 auto; background: transparent; 
      max-width: 100%; touch-action: none;
    }

    /* Animaci√≥n de p√©talos al tocar */
    .particula {
      position: fixed; pointer-events: none; z-index: 1000;
      animation: desaparecer 1.5s ease-out forwards;
    }
    @keyframes desaparecer {
      0% { transform: translate(0,0) scale(1) rotate(0deg); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(0) rotate(360deg); opacity: 0; }
    }
  </style>
</head>
<body onclick="crearPetalo(event)" ontouchstart="crearPetalo(event)">

<section id="bienvenida" class="pantalla" style="display:block;">
  <h1 style="color:var(--rosa-fuerte); margin-top:20%;">¬°Hola, mi ni√±o! ‚ù§Ô∏è</h1>
  <div style="font-size:80px; animation: bounce 2s infinite;">üéÅ</div>
  <p>Toca cualquier parte de la pantalla para ver la magia...</p>
  <button class="btn" onclick="mostrar('juego_relleno')">Empezar aventura ‚û°Ô∏è</button>
</section>

<section id="juego_relleno" class="pantalla">
  <h2 style="color:var(--rosa-fuerte)">Rellena mi coraz√≥n</h2>
  <p>¬°Pasa tu dedo muchas veces por el coraz√≥n!</p>
  <canvas id="canvasRelleno" width="300" height="300"></canvas>
  <div id="btnRelleno" style="display:none;"><button class="btn" onclick="mostrar('juego_intro')">¬°Ya est√° lleno! ‚ú®</button></div>
</section>

<section id="juego_intro" class="pantalla">
  <h2 style="color:var(--rosa-fuerte)">Toca y desliza</h2>
  <div class="card">
    <p>He llenado el cielo de flores para ti. ¬°Hazlas aparecer!</p>
  </div>
  <div style="height:200px; border:4px dotted var(--rosa); border-radius:20px; display:flex; align-items:center; justify-content:center; color:var(--rosa);">
    ¬°DESLIZA AQU√ç! üå∏üå∑‚ú®
  </div>
  <button class="btn" onclick="mostrar('juego1')">Ir a los Corazones ‚û°Ô∏è</button>
</section>

<section id="juego1" class="pantalla">
  <h2 style="color:var(--rosa-fuerte)">Atrapa 5 Rosados üíó</h2>
  <p>¬°Se mueven r√°pido! Esquiva los ‚ù§Ô∏è rojos y atrapa los de colores.</p>
  <canvas id="canvasCorazones" width="320" height="400" style="background:#fff; border-radius:20px; border:4px solid var(--rosa);"></canvas>
  <h3 id="puntos" style="color:var(--rosa-fuerte)">üíó: 0/5</h3>
  <div id="btnCorazones" style="display:none;"><button class="btn" onclick="mostrar('juego2')">¬°Nivel Superado! ‚û°Ô∏è</button></div>
</section>

<section id="juego2" class="pantalla">
  <h2 style="color:var(--rosa-fuerte)">Trivia M√°gica üèÜ</h2>
  <div class="card"><p id="pregT" style="font-weight:bold;"></p></div>
  <div id="optsT"></div>
</section>

<section id="juego3" class="pantalla" style="background:#001d3d; color:white;">
  <h3>¬°Protege nuestro amor! ‚ö°</h3>
  <canvas id="canvasCielo" width="320" height="400"></canvas>
  <div id="statCielo">Carga: 0% | ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
</section>

<section id="juego4" class="pantalla" style="background:#000;">
  <h2 style="color:var(--rosa)">Tus Tulipanes Brillantes üå∑</h2>
  <canvas id="canvasJardin" width="320" height="400"></canvas>
  <button class="btn" onclick="mostrar('juego5')">Casi llegamos... ‚û°Ô∏è</button>
</section>

<section id="juego5" class="pantalla">
  <h2 style="color:var(--rosa-fuerte)">Completa la canci√≥n üé§</h2>
  <div class="card">
    <p id="titL" style="font-size:12px; color:gray;"></p>
    <p id="fraseL" style="font-size:18px; font-weight:bold;"></p>
  </div>
  <div id="optsL"></div>
</section>

<section id="cartaFinal" class="pantalla">
  <div class="card" style="text-align:justify; margin-top:15%;">
    <h3 style="color:var(--rosa-fuerte); text-align:center;">Para mi ni√±o...</h3>
    <p>Quiz√° te demuestro muy poco y quiz√° esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento... Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme. S√© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor. ¬°Muakkkk! ‚ù§Ô∏è</p>
  </div>
  <button class="btn" onclick="location.reload()">Reiniciar con amor</button>
</section>

<script>
// --- FUNCI√ìN DE P√âTALOS AL TOCAR (PARA TODA LA APP) ---
function crearPetalo(e) {
  const x = e.touches ? e.touches[0].clientX : e.clientX;
  const y = e.touches ? e.touches[0].clientY : e.clientY;
  const emojis = ['üå∏', 'üå∑', '‚ú®', 'üíñ', 'üåº'];
  for(let i=0; i<3; i++) {
    const p = document.createElement('div');
    p.className = 'particula';
    p.innerText = emojis[Math.floor(Math.random()*emojis.length)];
    p.style.left = x + 'px'; p.style.top = y + 'px';
    p.style.fontSize = Math.random()*20 + 15 + 'px';
    p.style.setProperty('--dx', (Math.random()-0.5)*200 + 'px');
    p.style.setProperty('--dy', (Math.random()-0.5)*200 + 'px');
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1500);
  }
}

// --- NAVEGACI√ìN ---
function mostrar(id) {
  document.querySelectorAll('.pantalla').forEach(p => p.style.display = 'none');
  document.getElementById(id).style.display = 'block';
  if(id === 'juego_relleno') initRelleno();
  if(id === 'juego1') initCorazones();
  if(id === 'juego3') initCielo();
  if(id === 'juego4') initJardin();
  if(id === 'juego2') initTrivia();
  if(id === 'juego5') initCanciones();
}

// --- 1. JUEGO RELLENO ---
function initRelleno() {
  const cvs = document.getElementById('canvasRelleno'), ctx = cvs.getContext('2d');
  let pct = 0;
  function draw() {
    ctx.clearRect(0,0,300,300);
    ctx.save(); ctx.translate(150, 150);
    ctx.beginPath();
    for(let t=0; t<Math.PI*2; t+=0.01){
      let x = 10 * 16 * Math.pow(Math.sin(t), 3);
      let y = -10 * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
      ctx.lineTo(x, y);
    }
    ctx.strokeStyle = "#C71585"; ctx.lineWidth = 5; ctx.stroke();
    ctx.clip(); ctx.fillStyle = "#FF69B4";
    ctx.fillRect(-150, 150 - (pct*3), 300, 300);
    ctx.restore();
  }
  cvs.ontouchmove = (e) => { e.preventDefault(); pct += 1; draw(); if(pct>=100) document.getElementById('btnRelleno').style.display='block'; };
  draw();
}

// --- 2. JUEGO CORAZONES QUE SE MUEVEN ---
function initCorazones() {
  const cvs = document.getElementById('canvasCorazones'), ctx = cvs.getContext('2d');
  let pts = 0;
  let items = [];
  const tipos = [
    {t:'üíó', c:'rosado'}, {t:'‚ù§Ô∏è', c:'rojo'}, {t:'üíõ', c:'oro'}, {t:'üíú', c:'morado'}, {t:'üíô', c:'azul'}
  ];

  for(let i=0; i<20; i++) {
    items.push({
      x: Math.random()*280, y: Math.random()*380,
      vx: (Math.random()-0.5)*4, vy: (Math.random()-0.5)*4,
      tipo: tipos[Math.floor(Math.random()*tipos.length)], v: true
    });
  }

  function loop() {
    ctx.clearRect(0,0,320,400);
    items.forEach(it => {
      if(it.v) {
        ctx.font = "30px Arial";
        ctx.fillText(it.tipo.t, it.x, it.y);
        it.x += it.vx; it.y += it.vy;
        if(it.x<0 || it.x>290) it.vx *= -1;
        if(it.y<30 || it.y>390) it.vy *= -1;
      }
    });
    if(pts < 5) requestAnimationFrame(loop);
  }

  cvs.ontouchstart = (e) => {
    const r = cvs.getBoundingClientRect();
    const tx = e.touches[0].clientX - r.left;
    const ty = e.touches[0].clientY - r.top;
    items.forEach(it => {
      if(it.v && Math.hypot(it.x-tx, it.y-ty) < 40) {
        if(it.tipo.t === 'üíó') {
          it.v = false; pts++;
          document.getElementById('puntos').innerText = `üíó: ${pts}/5`;
          if(pts >= 5) document.getElementById('btnCorazones').style.display='block';
        } else if(it.tipo.t === '‚ù§Ô∏è') {
          // Penalizaci√≥n si quieres, o solo ignorar
        } else {
          // Otros colores: efecto visual
          it.vx *= 2;
        }
      }
    });
  };
  loop();
}

// --- 3. TRIVIA (7 PREGUNTAS) ---
let tIdx = 0;
const trivia = [
  {p:"¬øEn qu√© pa√≠s est√° la Torre Eiffel?", a:"Francia"},
  {p:"¬øCu√°l es el planeta rojo?", a:"Marte"},
  {p:"¬øColor de las esmeraldas?", a:"Verde"},
  {p:"¬øAnimal m√°s grande del mundo?", a:"Ballena Azul"},
  {p:"¬øC√≥mo se llama el Sol?", a:"Estrella"},
  {p:"¬øD√≠a que sigue al viernes?", a:"S√°bado"},
  {p:"¬øQui√©n te ama m√°s que a nada?", a:"T√∫"}
];
function initTrivia() {
  const t = trivia[tIdx];
  document.getElementById('pregT').innerText = t.p;
  let opciones = [t.a, "Londres", "J√∫piter", "Azul"].sort(()=>Math.random()-0.5);
  document.getElementById('optsT').innerHTML = opciones.map(o => `<button class="btn-opcion" style="background:white; border:2px solid var(--rosa); width:90%; margin:5px; padding:10px; border-radius:15px;" onclick="checkT('${o}')">${o}</button>`).join('');
}
window.checkT = (a) => {
  if(a === trivia[tIdx].a) {
    tIdx++;
    if(tIdx < trivia.length) initTrivia();
    else mostrar('juego3');
  }
};

// --- 4. CIELO EXTREMO ---
function initCielo() {
  const cvs = document.getElementById('canvasCielo'), ctx = cvs.getContext('2d');
  let x = 160, charge = 0, bolts = [], active = true;
  cvs.ontouchmove = (e) => { e.preventDefault(); x = e.touches[0].clientX - cvs.getBoundingClientRect().left; };
  function loop() {
    if(!active) return;
    ctx.fillStyle = "#001d3d"; ctx.fillRect(0,0,320,400);
    ctx.font = "30px Arial"; ctx.fillText("üíñ", x-15, 380);
    if(Math.random()<0.1) bolts.push({x:Math.random()*300, y:0});
    bolts.forEach((b,i) => {
      ctx.fillText("‚ö°", b.x, b.y); b.y += 6;
      if(Math.hypot(b.x-x, b.y-380)<30) { charge = 0; bolts=[]; }
    });
    charge += 0.4;
    document.getElementById('statCielo').innerText = `Carga: ${Math.floor(charge)}% | ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è`;
    if(charge>=100) { active=false; mostrar('juego4'); }
    else requestAnimationFrame(loop);
  } loop();
}

// --- 5. TULIPANES NE√ìN ---
function initJardin() {
  const cvs = document.getElementById('canvasJardin'), ctx = cvs.getContext('2d');
  let h = 0;
  function loop() {
    ctx.fillStyle = "black"; ctx.fillRect(0,0,320,400);
    for(let i=0; i<6; i++) {
      let tx = 40 + i*50;
      ctx.shadowBlur = 15; ctx.shadowColor = "#FF00FF";
      ctx.strokeStyle = "#0f0"; ctx.lineWidth = 3;
      ctx.beginPath(); ctx.moveTo(tx, 400); ctx.lineTo(tx, 400-h); ctx.stroke();
      ctx.fillStyle = "#FF1493"; ctx.beginPath(); ctx.ellipse(tx, 400-h-10, 10, 15, 0, 0, 7); ctx.fill();
    }
    if(h < 150) h += 1;
    requestAnimationFrame(loop);
  } loop();
}

// --- 6. CANCIONES (5 CANCIONES) ---
let sIdx = 0;
const canciones = [
  {t:"Ariana - 34+35", f:"Can you stay up all night?...", a:"til the daylight"},
  {t:"Cris MJ - Gata Only", f:"Mami no me digas que no...", a:"si yo s√©"},
  {t:"Bad Bunny - Tit√≠", f:"Tit√≠ me pregunt√≥ si tengo...", a:"muchas novias"},
  {t:"Cuco - Lo Que Siento", f:"Solo a ti te quiero...", a:"te amo"},
  {t:"Ariana - The Boy Is Mine", f:"Please separate it boy...", a:"i'm reading your mind"}
];
function initCanciones() {
  const s = canciones[sIdx];
  document.getElementById('titL').innerText = s.t;
  document.getElementById('fraseL').innerText = s.f;
  let opciones = [s.a, "forever", "nobody else", "tonight"].sort(()=>Math.random()-0.5);
  document.getElementById('optsL').innerHTML = opciones.map(o => `<button class="btn-opcion" style="background:white; border:2px solid var(--rosa); width:90%; margin:5px; padding:10px; border-radius:15px;" onclick="checkS('${o}')">${o}</button>`).join('');
}
window.checkS = (a) => {
  if(a === canciones[sIdx].a) {
    sIdx++;
    if(sIdx < canciones.length) initCanciones();
    else mostrar('cartaFinal');
  }
};
</script>
</body>
</html>
