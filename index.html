<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Con amor para ti üå∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <style>
    :root {
      --rosa:#FF69B4; --rosa-claro:#FFB6C1; --magenta:#DB7093; --bg:#FFF0F5;
      --oscuro:#0b132b; --azul:#00d4ff; --verde:#1DB954; --gris:#1a1a1a; --oro:#FFD700;
    }
    * { box-sizing: border-box; touch-action: manipulation; }
    body { margin:0; font-family: Georgia, serif; background: var(--bg); color:#333; overflow-x: hidden; }
    .pantalla { display:none; padding:20px; text-align:center; min-height:100vh; }
    .btn { margin:8px; padding:12px 18px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; transition: 0.3s; }
    .btn-primario { background: var(--rosa); color: white; }
    .btn-rosa { background: var(--rosa-claro); color:white; }
    .btn-verde { background: var(--verde); color:white; }
    .btn-azul { background: var(--azul); color:black; }
    canvas { border:2px solid #ffc0cb; background:transparent; border-radius:8px; max-width: 100%; height: auto; touch-action: none; }
    input { padding:12px; font-size:16px; border:2px solid #eee; border-radius:8px; text-align:center; width: 80%; margin-bottom: 10px; }
    #juego3 { background: var(--oscuro); color:white; }
    #juego4 { background:#0d1b2a; color:white; }
    #juego10 { background:#000014; color:white; }
    #cartaFinal { background:#FFFAF0; }
  </style>
</head>
<body>

<section id="bienvenida" class="pantalla" style="display:block;">
  <h1 style="color:var(--magenta)">Para mi persona favorita</h1>
  <p style="color:#BC8F8F">He preparado este peque√±o rinc√≥n para ti.<br>¬øMe permites mostrarte?</p>
  <button class="btn btn-rosa" onclick="mostrar('juego1')">Comenzar Viaje ‚ú®</button>
</section>

<section id="juego1" class="pantalla">
  <h2 style="color:#CD5C5C">üíñ Primer Reto: Afecto</h2>
  <div id="ronda1">
    <h3>Ronda 1: Un besito ‚ù§Ô∏è</h3>
    <canvas id="canvasR1" width="600" height="260"></canvas>
    <br><button class="btn btn-rosa" onclick="pasarRonda(1)">Siguiente ‚û°Ô∏è</button>
  </div>
  <div id="ronda2" style="display:none;">
    <h3>Ronda 2: Un abrazo üíú</h3>
    <canvas id="canvasR2" width="600" height="260"></canvas>
    <br><button class="btn btn-rosa" onclick="pasarRonda(2)">Siguiente ‚û°Ô∏è</button>
  </div>
  <div id="ronda3" style="display:none;">
    <h3>Busca 5 corazones rosados üíó</h3>
    <canvas id="canvasCorazones" width="600" height="350"></canvas>
    <p id="puntos">Puntos: 0/5</p>
    <button id="btnNext1" class="btn btn-primario" style="display:none;" onclick="mostrar('juego2')">Siguiente ‚û°Ô∏è</button>
  </div>
</section>

<section id="juego2" class="pantalla">
  <h2 style="color:var(--magenta)">üé® Encuentra el color oculto</h2>
  <p id="intentos">Te quedan 3 intentos</p>
  <div id="opciones"></div>
  <p id="mensaje" style="color:#F08080"></p>
</section>

<section id="juego3" class="pantalla">
  <h2>üöÄ Viaje Estelar</h2>
  <p id="frase" style="padding: 0 20px; font-style: italic;"></p>
  <div id="opcionesPrincipito"></div>
  <p id="estado"></p>
</section>

<section id="juego4" class="pantalla">
  <h2>‚ú® PROTEGE NUESTRO CIELO ‚ú®</h2>
  <canvas id="canvasEsquiva" width="600" height="450"></canvas>
  <p id="energia">Energ√≠a del Amor: 0%</p>
</section>

<section id="juego5" class="pantalla">
  <h2>üíñ Laberinto M√°gico</h2>
  <p>Evita los muros m√≥viles y llega a la meta roja</p>
  <p id="vidasLab">Vidas: ‚ù§Ô∏è ‚ù§Ô∏è ‚ù§Ô∏è</p>
  <canvas id="canvasLaberinto" width="600" height="500"></canvas>
</section>

<section id="juego6" class="pantalla">
  <h2 style="color:#DB7093">üå∏ Un Jard√≠n Eterno para ti üå∏</h2>
  <canvas id="canvasJardin" width="800" height="600"></canvas>
  <p style="font-style:italic; color:#DB7093; margin-top:10px;">"Si tuviera una flor por cada vez que pienso en ti, podr√≠a caminar para siempre en mi jard√≠n."</p>
  <button class="btn btn-primario" onclick="mostrar('juego7')">Continuar ‚û°Ô∏è</button>
</section>

<section id="juego7" class="pantalla">
  <h2>üéµ Trivia Musical üéµ</h2>
  <p id="preguntaTrivia" style="font-weight:bold; font-size:1.1em;"></p>
  <div id="opcionesTrivia"></div>
</section>

<section id="juego8" class="pantalla">
  <h2>üé§ Completa la letra üé§</h2>
  <p id="tituloLetra" style="font-style:italic; color:#666"></p>
  <p id="fraseLetra" style="font-weight:bold; margin:15px 0;"></p>
  <div id="opcionesLetra"></div>
</section>

<section id="juego9" class="pantalla">
  <h2>üïµÔ∏è Adivina el Artista</h2>
  <p id="emojiArtista" style="font-size:45px; margin:20px 0;"></p>
  <input id="entradaArtista" type="text" placeholder="¬øQui√©n es?" />
  <br><button class="btn btn-verde" onclick="verificarArtista()">Comprobar</button>
</section>

<section id="juego10" class="pantalla">
  <h2 style="color:var(--oro)">üéâ ¬°ERES LA MEJOR! üéâ</h2>
  <p style="color:white; font-size:0.9em;">Lo lograste todo. Eres incre√≠ble y quer√≠a record√°rtelo as√≠.</p>
  <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 15px; margin: 10px auto; border: 1px solid var(--rosa); text-align: left; max-width: 380px;">
    <p style="color: #FFB6C1; font-weight: bold; text-align: center;">üéµ Nuestras 5 canciones:</p>
    <ul style="color: white; font-size: 0.85em; list-style: none; padding: 0;">
      <li>1. The Boy Is Mine - Ariana Grande</li>
      <li>2. Lo Que Siento - Cuco</li>
      <li>3. Te Amar√© - Silvio Rodr√≠guez</li>
      <li>4. Nadie Sabe / Monaco - Bad Bunny</li>
      <li>5. Die With A Smile - Lady Gaga & Bruno Mars</li>
    </ul>
  </div>
  <canvas id="canvasFuegos" width="800" height="600"></canvas>
  <br><button class="btn btn-rosa" onclick="mostrar('cartaFinal')">Abrir Carta Especial üíå</button>
</section>

<section id="cartaFinal" class="pantalla">
  <canvas id="canvasCarta" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1;"></canvas>
  <div id="sobre" style="position:relative; z-index:2; background:#FFEFF4; border:2px solid #FFC0CB; border-radius:12px; padding:25px; max-width:600px; margin:20px auto; box-shadow:0 10px 30px rgba(0,0,0,0.1);">
    <h3 style="color:#DB7093;">Mi carta para ti...</h3>
    <div style="text-align:justify; font-size:15px; line-height:1.7; color:#444; max-height:450px; overflow-y:auto; padding-right:10px;">
      Quiz√° te demuestro muy poco y quiz√° esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento. Realmente, hay muchas cosas que siento y que quisiera expresar, pero creo que de verdad me quedo corta, jajaja, ir√≥nico ¬øcierto? Haciendo esto cayeron varias de mis l√°grimas, no lo voy a negar. Muchas cosas me asustan y, entre esas, que me destrocen, porque una vez ya llegu√© a eso. Al menos, si llego a caer ah√≠ otra vez, que no sea por ti, por favor. Quiero algo bonito e igual siento que quiz√° si no funciona pueda ser porque soy yo el problema. Siendo as√≠, te pido disculpas, quiz√° por el miedo a llorar me limit√© a ciertas cosas. Bueno, pero quiero que sepas que hay muchos sentimientos, muchas emociones que me haces sentir. Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme. S√© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor. ¬°Muakkkk!
    </div>
    <button class="btn btn-primario" style="margin-top:20px;" onclick="location.reload()">Cerrar con un abrazo ü§ó</button>
  </div>
</section>

<script>
// --- MOTOR Y M√ìVIL ---
function mostrar(id){
  document.querySelectorAll('.pantalla').forEach(p=>p.style.display='none');
  document.getElementById(id).style.display='block';
  window.scrollTo(0,0);
}
function getPos(e, canvas) {
  const rect = canvas.getBoundingClientRect();
  const cx = e.touches ? e.touches[0].clientX : e.clientX;
  const cy = e.touches ? e.touches[0].clientY : e.clientY;
  const sx = canvas.width / rect.width;
  const sy = canvas.height / rect.height;
  return { x: (cx - rect.left) * sx, y: (cy - rect.top) * sy };
}

// --- JUEGO 1: CORAZONES ---
function pasarRonda(n){
  document.getElementById("ronda"+n).style.display="none";
  document.getElementById("ronda"+(n+1)).style.display="block";
}
const huye = (id, em) => {
  const cvs = document.getElementById(id), ctx = cvs.getContext("2d");
  let p = {x:300, y:130};
  const d = () => { ctx.clearRect(0,0,cvs.width,cvs.height); ctx.font="50px Arial"; ctx.fillText(em, p.x-25, p.y+20); };
  const m = (e) => {
    const pos = getPos(e, cvs);
    if(Math.hypot(pos.x-p.x, pos.y-p.y) < 70) {
      p.x = Math.random()*(cvs.width-100)+50; p.y = Math.random()*(cvs.height-100)+50;
      d();
    }
  };
  cvs.addEventListener("touchstart", (e)=>{e.preventDefault(); m(e);});
  cvs.addEventListener("mousemove", m);
  d();
};
huye("canvasR1", "‚ù§Ô∏è"); huye("canvasR2", "üíú");

// Ronda 3: 5 Corazones
(function(){
  const cvs = document.getElementById("canvasCorazones"), ctx = cvs.getContext("2d");
  let pts = 0, items = [];
  function spawn(){
    if(pts>=5) return;
    items.push({x:Math.random()*540+30, y:Math.random()*300+30, t:["‚ù§Ô∏è","üíú","üíó","üå∏"][(Math.random()*4)|0]});
    ctx.clearRect(0,0,cvs.width,cvs.height);
    items.forEach(i=>{ ctx.font="35px Arial"; ctx.fillText(i.t, i.x, i.y); });
    setTimeout(spawn, 350);
  }
  cvs.addEventListener("touchstart", (e)=>{
    e.preventDefault(); const pos = getPos(e, cvs);
    items.forEach((it, idx)=>{
      if(Math.hypot(pos.x-it.x-15, pos.y-it.y+15)<45 && it.t==="üíó"){
        pts++; items.splice(idx,1);
        document.getElementById("puntos").innerText = `Puntos: ${pts}/5`;
        if(pts>=5) document.getElementById("btnNext1").style.display="inline";
      }
    });
  });
  const obs = new MutationObserver(()=>{ if(document.getElementById("ronda3").style.display==="block" && items.length===0) spawn(); });
  obs.observe(document.body, {attributes:true, subtree:true});
})();

// --- JUEGO 2: COLORES (TROLL) ---
(function(){
  let ints = 3;
  window.checkC = (n) => {
    ints--;
    if(ints>0) document.getElementById("mensaje").innerText = "¬°Nop! Intenta otro...";
    else {
      document.getElementById("opciones").innerHTML = `<button class="btn btn-rosa" onclick="mostrar('juego3')">¬°Era Rosado! Toca para seguir ü§°</button>`;
      document.getElementById("intentos").innerText = "¬°Se acabaron!";
    }
  };
  const ops = [{n:"Azul", c:"#ADD8E6"}, {n:"Rojo", c:"#FFB2B2"}, {n:"Verde", c:"#C2F0C2"}, {n:"Amarillo", c:"#FFFFE0"}];
  document.getElementById("opciones").innerHTML = ops.map(o=>`<button class="btn" style="background:${o.c}" onclick="checkC('${o.n}')">${o.n}</button>`).join("");
})();

// --- JUEGO 3: PRINCIPITO ---
(function(){
  const f = [{q:"Lo esencial es invisible...", a:"a los ojos"}, {q:"Fue el tiempo que pasaste con tu...", a:"rosa"}, {q:"Si vienes a las cuatro de la tarde...", a:"empezar√© a ser feliz"}];
  let i = 0;
  window.checkP = (a)=>{ if(a===f[i].a){ i++; render(); } };
  function render(){
    if(i>=f.length) { document.getElementById("juego3").innerHTML = `<button class="btn btn-azul" onclick="mostrar('juego4')">Seguir üöÄ</button>`; return; }
    document.getElementById("frase").innerText = f[i].q;
    document.getElementById("opcionesPrincipito").innerHTML = `<button class="btn" onclick="checkP('${f[i].a}')">${f[i].a}</button><button class="btn" onclick="alert('Cerca...')">al coraz√≥n</button>`;
  }
  render();
})();

// --- JUEGO 4: CIELO (TORMENTA) ---
(function(){
  const cvs = document.getElementById("canvasEsquiva"), ctx = cvs.getContext("2d");
  let cor = {x:300, y:350}, p = 0, act = false, obs = [];
  cvs.addEventListener("touchmove", (e)=>{ e.preventDefault(); const pos = getPos(e, cvs); cor.x = pos.x; cor.y = pos.y; });
  function loop(){
    if(!act) return;
    ctx.clearRect(0,0,600,450);
    ctx.font="30px Arial"; ctx.fillText("‚ù§Ô∏è", cor.x-15, cor.y);
    if(Math.random()<0.15) obs.push({x:Math.random()*600, y:-30, t:"‚ö°", v:7});
    obs.forEach((o,i)=>{
      ctx.fillText(o.t, o.x, o.y); o.y+=o.v;
      if(Math.hypot(cor.x-o.x, cor.y-o.y)<30) p = Math.max(0, p-5);
    });
    p += 0.4; document.getElementById("energia").innerText = `Energ√≠a: ${Math.floor(Math.min(100,p))}%`;
    if(p>=100) { act=false; document.getElementById("juego4").innerHTML += `<button class="btn btn-azul" onclick="mostrar('juego5')">Siguiente</button>`; }
    else requestAnimationFrame(loop);
  }
  const ob = new MutationObserver(()=>{ if(document.getElementById("juego4").style.display==="block" && !act) { act=true; loop(); } });
  ob.observe(document.body, {attributes:true, subtree:true});
})();

// --- JUEGO 5: LABERINTO DIF√çCIL ---
(function(){
  const cvs = document.getElementById("canvasLaberinto"), ctx = cvs.getContext("2d");
  let jug = {x:30, y:30}, vds = 3, muros = [
    {x:0, y:100, w:500, h:20, d:2},
    {x:100, y:200, w:500, h:20, d:-2},
    {x:0, y:300, w:500, h:20, d:2.5},
    {x:100, y:400, w:500, h:20, d:-2.5}
  ];
  const mvr = (e)=>{ const p = getPos(e, cvs); jug.x = p.x; jug.y = p.y; };
  cvs.addEventListener("touchmove", (e)=>{e.preventDefault(); mvr(e);});
  function loop(){
    ctx.clearRect(0,0,600,500);
    ctx.fillStyle="red"; ctx.fillRect(550, 440, 40, 40); // Meta
    ctx.fillStyle="#FF69B4";
    muros.forEach(m => {
      ctx.fillRect(m.x, m.y, m.w, m.h); m.w += m.d;
      if(m.w > 580 || m.w < 100) m.d *= -1;
      if(jug.x > m.x && jug.x < m.x+m.w && jug.y > m.y && jug.y < m.y+m.h){
        jug = {x:30, y:30}; vds--; document.getElementById("vidasLab").innerText = "Vidas: " + "‚ù§Ô∏è".repeat(vds);
        if(vds<=0) { vds=3; alert("¬°Cuidado! Reiniciando..."); }
      }
    });
    ctx.font="20px Arial"; ctx.fillText("üíñ", jug.x-10, jug.y+10);
    if(jug.x>550 && jug.y>440) { document.getElementById("juego5").innerHTML = `<h2>¬°Pasaste el nivel dif√≠cil!</h2><button class="btn btn-rosa" onclick="mostrar('juego6')">Ir al Jard√≠n</button>`; }
    else requestAnimationFrame(loop);
  }
  const ob = new MutationObserver(()=>{ if(document.getElementById("juego5").style.display==="block") loop(); });
  ob.observe(document.body, {attributes:true, subtree:true});
})();

// --- JUEGO 6: JARD√çN ESPECTACULAR ---
(function(){
  const cvs = document.getElementById("canvasJardin"), ctx = cvs.getContext("2d");
  let floresCaen = [];
  const colores = ["#FF69B4", "#FFB6C1", "#FFD700", "#DB7093", "#FFFFFF", "#E6E6FA"];
  
  function dibujarTulipan(x, y, col) {
    ctx.strokeStyle = "green"; ctx.lineWidth = 3;
    ctx.beginPath(); ctx.moveTo(x, y); ctx.lineTo(x, y+80); ctx.stroke();
    ctx.fillStyle = col;
    ctx.beginPath(); ctx.moveTo(x, y);
    ctx.quadraticCurveTo(x-15, y-20, x, y-40); ctx.quadraticCurveTo(x+15, y-20, x, y);
    ctx.fill();
    ctx.beginPath(); ctx.moveTo(x, y);
    ctx.quadraticCurveTo(x-25, y-10, x-10, y-35); ctx.fill();
    ctx.beginPath(); ctx.moveTo(x, y);
    ctx.quadraticCurveTo(x+25, y-10, x+10, y-35); ctx.fill();
  }

  function loop(){
    ctx.fillStyle = "#228B22"; ctx.fillRect(0, 450, 800, 150); // Suelo verde
    ctx.fillStyle = "#FFF0F5"; ctx.fillRect(0, 0, 800, 450); // Cielo
    
    // Dibujar tulipanes fijos
    for(let i=0; i<30; i++){
      dibujarTulipan(30 + i*26, 450 + (i%3)*10, colores[i%colores.length]);
    }
    
    // Brillo ‚ú®
    for(let i=0; i<5; i++){
      ctx.fillStyle = "white"; ctx.fillText("‚ú®", Math.random()*800, Math.random()*600);
    }
    
    // Flores cayendo
    if(Math.random()<0.1) floresCaen.push({x:Math.random()*800, y:-20, v:2, c:"üå∏"});
    floresCaen.forEach((f, i)=>{
      ctx.font="20px Arial"; ctx.fillText(f.c, f.x, f.y); f.y += f.v;
      if(f.y > 600) floresCaen.splice(i, 1);
    });
    
    requestAnimationFrame(loop);
  }
  const ob = new MutationObserver(()=>{ if(document.getElementById("juego6").style.display==="block") loop(); });
  ob.observe(document.body, {attributes:true, subtree:true});
})();

// --- TRIVIA EXTENDIDA ---
(function(){
  const t = [
    {p:"¬øQui√©n canta 'The Boy Is Mine'?", a:"Ariana Grande", o:["Taylor Swift", "Ariana Grande", "Dua Lipa", "Rihanna"]},
    {p:"¬ø'Lo Que Siento' es de...?", a:"Cuco", o:["Bad Bunny", "Cuco", "Kali Uchis", "Omar Apollo"]},
    {p:"¬øA qui√©n le dicen 'El Sol de M√©xico'?", a:"Luis Miguel", o:["Cristian Castro", "Luis Miguel", "Chayanne", "Juan Gabriel"]},
    {p:"¬øDe qu√© pa√≠s es Silvio Rodr√≠guez?", a:"Cuba", o:["Chile", "Cuba", "M√©xico", "Espa√±a"]},
    {p:"¬øCanci√≥n de Lady Gaga y Bruno Mars?", a:"Die With A Smile", o:["Die With A Smile", "Shallow", "Uptown Funk", "Rain on Me"]}
  ];
  let idx = 0;
  window.checkT = (o)=>{ if(o===t[idx].a){ idx++; rdr(); } };
  function rdr(){
    if(idx>=t.length){ document.getElementById("juego7").innerHTML = `<button class="btn btn-verde" onclick="mostrar('juego8')">¬°Sabes mucho! Siguiente</button>`; return; }
    document.getElementById("preguntaTrivia").innerText = t[idx].p;
    document.getElementById("opcionesTrivia").innerHTML = t[idx].o.map(o=>`<button class="btn" style="background:#333; color:white" onclick="checkT('${o}')">${o}</button>`).join("");
  }
  rdr();
})();

// --- COMPLETAR LETRA ---
(function(){
  const l = [
    {t:"Luis Miguel", f:"Si t√∫ me hubieras dicho siempre la verdad...", a:"si hubieras respondido cuando te llam√©", o:["si no te hubieras ido", "si hubieras respondido cuando te llam√©", "si me hubieras amado", "si no fueras as√≠"]},
    {t:"Bad Bunny", f:"T√∫ eres mi mami, yo soy tu...", a:"papi", o:["beb√©", "papi", "rey", "gatito"]}
  ];
  let idx = 0;
  window.checkL = (o)=>{ if(o===l[idx].a){ idx++; rdr(); } };
  function rdr(){
    if(idx>=l.length){ document.getElementById("juego8").innerHTML = `<button class="btn btn-primario" onclick="mostrar('juego9')">¬°Cantas genial! Sigamos</button>`; return; }
    document.getElementById("tituloLetra").innerText = l[idx].t;
    document.getElementById("fraseLetra").innerText = l[idx].f;
    document.getElementById("opcionesLetra").innerHTML = l[idx].o.map(o=>`<button class="btn" style="background:#eee" onclick="checkL('${o}')">${o}</button>`).join("");
  }
  rdr();
})();

// --- ARTISTA ---
window.verificarArtista = () => {
  const v = document.getElementById("entradaArtista").value.toLowerCase();
  if(v.includes("bad bunny") || v.includes("ariana") || v.includes("luis miguel")) mostrar('juego10');
  else alert("¬°Casi! Intenta con Bad Bunny o Ariana...");
};
document.getElementById("emojiArtista").innerText = "üëÅÔ∏è üê∞ üèéÔ∏è";

// --- FUEGOS ARTIFICIALES ---
(function(){
  const cvs = document.getElementById("canvasFuegos"), ctx = cvs.getContext("2d");
  let p = [];
  function anim(){
    ctx.fillStyle="rgba(0,0,20,0.2)"; ctx.fillRect(0,0,800,600);
    if(Math.random()<0.08) {
      let x=Math.random()*800, y=Math.random()*300, col="hsl("+Math.random()*360+",100%,50%)";
      for(let i=0; i<60; i++) p.push({x,y,vx:Math.random()*6-3, vy:Math.random()*6-3, l:70, c:col});
    }
    p.forEach((it,i)=>{
      ctx.fillStyle=it.c; ctx.fillRect(it.x, it.y, 3, 3); it.x+=it.vx; it.y+=it.vy; it.vy+=0.05; it.l--;
      if(it.l<=0) p.splice(i,1);
    });
    requestAnimationFrame(anim);
  }
  const ob = new MutationObserver(()=>{ if(document.getElementById("juego10").style.display==="block") anim(); });
  ob.observe(document.body, {attributes:true, subtree:true});
})();

// --- CORAZONES FLOTANTES CARTA ---
(function(){
  const cvs = document.getElementById("canvasCarta"), ctx = cvs.getContext("2d");
  let h = [];
  function resize(){ cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
  window.addEventListener("resize", resize); resize();
  function anim(){
    ctx.clearRect(0,0,cvs.width,cvs.height);
    if(Math.random()<0.1) h.push({x:Math.random()*cvs.width, y:cvs.height+20, v:Math.random()*2+1, s:Math.random()*20+10});
    h.forEach((it, i)=>{
      ctx.font = it.s+"px Arial"; ctx.fillText("üíó", it.x, it.y); it.y -= it.v;
      if(it.y < -30) h.splice(i,1);
    });
    requestAnimationFrame(anim);
  }
  const ob = new MutationObserver(()=>{ if(document.getElementById("cartaFinal").style.display==="block") anim(); });
  ob.observe(document.body, {attributes:true, subtree:true});
})();
</script>
</body>
</html>
