<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>El Mundo de mi Ni√±o üå∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style>
    :root {
      --rosa: #FF69B4; --rosa-fuerte: #C71585; --bg: #FFF0F5; --oro: #ffd700; --celeste: #00d4ff;
    }
    * { box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
    
    body, html { 
      margin: 0; padding: 0; width: 100%; height: 100%; 
      background: var(--bg); font-family: 'Arial Rounded MT Bold', sans-serif;
      overflow: hidden; color: #333;
    }

    /* Fondo de lluvia de corazones constante */
    #fondo-animado {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none; z-index: 0;
    }

    .pantalla { 
      display: none; position: absolute; top: 0; left: 0;
      width: 100%; height: 100%; padding: 20px;
      text-align: center; z-index: 10; overflow-y: auto;
    }

    .card { 
      background: rgba(255, 255, 255, 0.9); padding: 20px; 
      border-radius: 25px; border: 3px dashed var(--rosa-fuerte);
      margin: 15px auto; box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    }

    .btn { 
      padding: 18px; border: none; border-radius: 50px; 
      font-weight: bold; cursor: pointer; font-size: 16px;
      background: linear-gradient(45deg, var(--rosa), var(--rosa-fuerte));
      color: white; margin: 10px auto; width: 85%; max-width: 300px;
      display: block; box-shadow: 0 5px 15px rgba(199, 21, 133, 0.4);
    }

    canvas { 
      display: block; margin: 0 auto; 
      background: rgba(255,255,255,0.8); border-radius: 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1); touch-action: none;
    }

    .particula {
      position: fixed; pointer-events: none; z-index: 1000;
      animation: desaparecer 1.2s ease-out forwards;
    }
    @keyframes desaparecer {
      0% { transform: translate(0,0) scale(1); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
    }

    h1, h2 { color: var(--rosa-fuerte); text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }
  </style>
</head>
<body>

<canvas id="fondo-animado"></canvas>

<section id="bienvenida" class="pantalla" style="display:block;">
  <div style="margin-top:20%;">
    <h1>¬°Hola, mi ni√±o! ‚ù§Ô∏è</h1>
    <div class="card">
      <p>"He guardado todo mi amor en este juego... ¬øme ayudas a encontrarlo?"</p>
    </div>
    <div style="font-size:80px;">üíù</div>
    <button class="btn" onclick="mostrar('juego_relleno')">Empezar aventura ‚ú®</button>
  </div>
</section>

<section id="juego_relleno" class="pantalla">
  <h2>Rellena mi coraz√≥n üíì</h2>
  <p>Usa tu dedo para pintar el coraz√≥n de rosa</p>
  <canvas id="canvasRelleno"></canvas>
  <div id="btnRelleno" style="display:none;"><button class="btn" onclick="mostrar('juego_intro')">¬°Ya est√° lleno! ‚û°Ô∏è</button></div>
</section>

<section id="juego_intro" class="pantalla">
  <h2>Toca el cielo üå∏</h2>
  <div class="card">
    <p>¬°Mueve tus dedos por toda la pantalla para ver las flores brotar!</p>
  </div>
  <div style="height:250px; border:4px dashed var(--rosa); border-radius:30px; display:flex; align-items:center; justify-content:center; color:var(--rosa); font-size:20px;">
    ¬°JUEGA AQU√ç! ‚ú®
  </div>
  <button class="btn" onclick="mostrar('juego1')">¬°Ir a los Corazones! ‚û°Ô∏è</button>
</section>

<section id="juego1" class="pantalla">
  <h2>Atrapa 5 Rosados üíó</h2>
  <p>¬°Cuidado! Los rojos ‚ù§Ô∏è quitan puntos. <br>¬°Los de colores se mueven r√°pido!</p>
  <canvas id="canvasCorazones"></canvas>
  <h2 id="puntos" style="color:var(--rosa-fuerte)">üíó: 0 / 5</h2>
  <div id="btnCorazones" style="display:none;"><button class="btn" onclick="mostrar('juego2')">¬°Eres un crack! ‚û°Ô∏è</button></div>
</section>

<section id="juego2" class="pantalla">
  <h2>Trivia de mi Ni√±o üèÜ</h2>
  <div class="card"><p id="pregT" style="font-size:1.2em;"></p></div>
  <div id="optsT"></div>
</section>

<section id="juego3" class="pantalla" style="background:#001d3d; color:white;">
  <h2 style="color:var(--celeste)">¬°Esquiva los rayos! ‚ö°</h2>
  <canvas id="canvasCielo"></canvas>
  <div id="statCielo" style="font-size:20px; font-weight:bold; margin-top:10px;">Escudo: 0%</div>
</section>

<section id="juego4" class="pantalla" style="background:#000;">
  <h2 style="color:var(--rosa)">Tus Tulipanes üå∑</h2>
  <p style="color:#888;">Mira c√≥mo brillan en la oscuridad...</p>
  <canvas id="canvasJardin"></canvas>
  <button class="btn" onclick="mostrar('juego5')">Casi terminamos... ‚û°Ô∏è</button>
</section>

<section id="juego5" class="pantalla">
  <h2>Completa la letra üé§</h2>
  <div class="card">
    <p id="titL" style="color:var(--rosa-fuerte); font-weight:bold;"></p>
    <p id="fraseL" style="font-style:italic; font-size:1.1em;"></p>
  </div>
  <div id="optsL"></div>
</section>

<section id="cartaFinal" class="pantalla">
  <div class="card" style="text-align:justify; margin-top:10%; line-height:1.6;">
    <h3 style="color:var(--rosa-fuerte); text-align:center;">Para mi ni√±o consentido...</h3>
    <p>Quiz√° te demuestro muy poco y quiz√° esto no sea nada o, si lo es, no sea suficiente. No es que no quiera expresar o mostrar todo lo que siento... Me haces feliz y quiero poder hacerte igual de feliz. Gracias por estar y por aguantarme. S√© que me pongo tonta y sigo mejorando por ti para ser y poder entregarte lo mejor. ¬°Muakkkk! ‚ù§Ô∏è</p>
    <div style="text-align:center; font-size:40px;">üë®‚Äç‚ù§Ô∏è‚Äçüë®üå∑‚ú®</div>
  </div>
  <button class="btn" onclick="location.reload()">Empezar de nuevo</button>
</section>

<script>
// --- AJUSTE DIN√ÅMICO DE CANVAS ---
const ww = window.innerWidth;
const wh = window.innerHeight;

function ajustarCanvas(id, w, h) {
    const c = document.getElementById(id);
    c.width = w; c.height = h;
}

// --- LLUVIA DE CORAZONES FONDO ---
const backCvs = document.getElementById('fondo-animado');
const bctx = backCvs.getContext('2d');
backCvs.width = ww; backCvs.height = wh;
let lluvia = [];
for(let i=0; i<15; i++) lluvia.push({x: Math.random()*ww, y: Math.random()*wh, s: Math.random()*2+1, sz: Math.random()*20+10});

function animarFondo() {
    bctx.clearRect(0,0,ww,wh);
    bctx.fillStyle = "rgba(255, 105, 180, 0.3)";
    lluvia.forEach(h => {
        bctx.font = h.sz + "px Arial";
        bctx.fillText("üíó", h.x, h.y);
        h.y += h.s; if(h.y > wh) h.y = -20;
    });
    requestAnimationFrame(animarFondo);
}
animarFondo();

// --- P√âTALOS AL TOCAR ---
function spawnParticula(x, y) {
    const emojis = ['üå∏','üå∑','‚ú®','üíñ'];
    const p = document.createElement('div');
    p.className = 'particula';
    p.innerText = emojis[Math.floor(Math.random()*emojis.length)];
    p.style.left = x + 'px'; p.style.top = y + 'px';
    p.style.setProperty('--dx', (Math.random()-0.5)*150 + 'px');
    p.style.setProperty('--dy', (Math.random()-0.5)*150 + 'px');
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 1200);
}
window.addEventListener('touchstart', (e) => spawnParticula(e.touches[0].clientX, e.touches[0].clientY));

// --- NAVEGACI√ìN ---
function mostrar(id) {
    document.querySelectorAll('.pantalla').forEach(p => p.style.display = 'none');
    document.getElementById(id).style.display = 'block';
    if(id === 'juego_relleno') initRelleno();
    if(id === 'juego1') initCorazones();
    if(id === 'juego3') initCielo();
    if(id === 'juego4') initJardin();
}

// --- 1. JUEGO RELLENO ---
function initRelleno() {
    ajustarCanvas('canvasRelleno', 280, 280);
    const cvs = document.getElementById('canvasRelleno'), ctx = cvs.getContext('2d');
    let pct = 0;
    function draw() {
        ctx.clearRect(0,0,280,280); ctx.save(); ctx.translate(140, 140);
        ctx.beginPath();
        for(let t=0; t<Math.PI*2; t+=0.01){
            let x = 8 * 16 * Math.pow(Math.sin(t), 3);
            let y = -8 * (13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t));
            ctx.lineTo(x, y);
        }
        ctx.strokeStyle = "#C71585"; ctx.lineWidth = 4; ctx.stroke();
        ctx.clip(); ctx.fillStyle = "#FF69B4"; ctx.fillRect(-140, 140 - (pct*2.8), 280, 280);
        ctx.restore();
    }
    cvs.addEventListener('touchmove', (e) => { e.preventDefault(); pct += 1.5; draw(); if(pct>=100) document.getElementById('btnRelleno').style.display='block'; });
    draw();
}

// --- 2. CORAZONES ---
function initCorazones() {
    ajustarCanvas('canvasCorazones', 300, 380);
    const cvs = document.getElementById('canvasCorazones'), ctx = cvs.getContext('2d');
    let pts = 0, items = [];
    const tipos = ['üíó','‚ù§Ô∏è','üíõ','üíô','üíú'];
    for(let i=0; i<25; i++) items.push({x:Math.random()*260, y:Math.random()*340, vx:(Math.random()-0.5)*5, vy:(Math.random()-0.5)*5, t:tipos[Math.floor(Math.random()*tipos.length)], v:true});

    function loop() {
        ctx.clearRect(0,0,300,380);
        items.forEach(it => {
            if(it.v) {
                ctx.font = "30px Arial"; ctx.fillText(it.t, it.x, it.y);
                it.x += it.vx; it.y += it.vy;
                if(it.x<0 || it.x>270) it.vx *= -1; if(it.y<30 || it.y>370) it.vy *= -1;
            }
        });
        if(pts < 5) requestAnimationFrame(loop);
    }
    cvs.addEventListener('touchstart', (e) => {
        const r = cvs.getBoundingClientRect();
        const tx = e.touches[0].clientX - r.left, ty = e.touches[0].clientY - r.top;
        items.forEach(it => {
            if(it.v && Math.hypot(it.x-tx, it.y-ty) < 40) {
                if(it.t === 'üíó') { it.v=false; pts++; document.getElementById('puntos').innerText = `üíó: ${pts} / 5`; }
                else if(it.t === '‚ù§Ô∏è') { pts = Math.max(0, pts-1); document.getElementById('puntos').innerText = `üíó: ${pts} / 5`; }
                if(pts >= 5) document.getElementById('btnCorazones').style.display='block';
            }
        });
    });
    loop();
}

// --- 3. TRIVIA (7) ---
let tIdx = 0;
const trivia = [
    {p:"¬øEn qu√© ciudad est√° la Torre Eiffel?", a:"Par√≠s"}, {p:"¬øCu√°l es el planeta m√°s grande?", a:"J√∫piter"},
    {p:"¬øDe qu√© color es el cielo despejado?", a:"Azul"}, {p:"¬øAnimal con trompa larga?", a:"Elefante"},
    {p:"¬øD√≠a antes del lunes?", a:"Domingo"}, {p:"¬øFruta roja con pecas?", a:"Fresa"}, {p:"¬øQui√©n es el m√°s guapo?", a:"Mi ni√±o"}
];
function initTrivia() {
    const t = trivia[tIdx]; document.getElementById('pregT').innerText = t.p;
    let ops = [t.a, "Londres", "Marte", "Pera"].sort(()=>Math.random()-0.5);
    document.getElementById('optsT').innerHTML = ops.map(o => `<button class="btn" onclick="checkT('${o}')">${o}</button>`).join('');
}
window.checkT = (a) => { if(a===trivia[tIdx].a){ tIdx++; if(tIdx<trivia.length) initTrivia(); else mostrar('juego3'); } };
initTrivia();

// --- 4. CIELO ---
function initCielo() {
    ajustarCanvas('canvasCielo', 300, 380);
    const cvs = document.getElementById('canvasCielo'), ctx = cvs.getContext('2d');
    let x=150, charge=0, bolts=[], active=true;
    cvs.addEventListener('touchmove', (e) => { e.preventDefault(); x = e.touches[0].clientX - cvs.getBoundingClientRect().left; });
    function loop() {
        if(!active) return;
        ctx.fillStyle = "#001d3d"; ctx.fillRect(0,0,300,380);
        ctx.font = "40px Arial"; ctx.fillText("üíñ", x-20, 360);
        if(Math.random()<0.1) bolts.push({x:Math.random()*280, y:0});
        bolts.forEach((b,i) => {
            ctx.font="30px Arial"; ctx.fillText("‚ö°", b.x, b.y); b.y += 7;
            if(Math.hypot(b.x-x, b.y-360)<35) { charge=0; bolts=[]; }
        });
        charge += 0.4; document.getElementById('statCielo').innerText = `Escudo: ${Math.floor(charge)}%`;
        if(charge>=100) { active=false; mostrar('juego4'); } else requestAnimationFrame(loop);
    } loop();
}

// --- 5. TULIPANES ---
function initJardin() {
    ajustarCanvas('canvasJardin', 300, 380);
    const cvs = document.getElementById('canvasJardin'), ctx = cvs.getContext('2d');
    let h = 0;
    function loop() {
        ctx.fillStyle = "black"; ctx.fillRect(0,0,300,380);
        for(let i=0; i<6; i++) {
            let tx = 40 + i*45;
            ctx.shadowBlur = 20; ctx.shadowColor = "#FF00FF"; ctx.strokeStyle = "#0f0"; ctx.lineWidth = 4;
            ctx.beginPath(); ctx.moveTo(tx, 380); ctx.lineTo(tx, 380-h); ctx.stroke();
            ctx.fillStyle = "#FF1493"; ctx.beginPath(); ctx.ellipse(tx, 380-h-15, 10, 20, 0, 0, 7); ctx.fill();
        }
        if(h < 180) h += 1.5; requestAnimationFrame(loop);
    } loop();
}

// --- 6. CANCIONES (5) ---
let sIdx = 0;
const canciones = [
    {t:"Ariana - 34+35", f:"Can you stay up all night?...", a:"til the daylight"},
    {t:"Cris MJ - Gata Only", f:"Mami no me digas que no...", a:"si yo s√©"},
    {t:"Bad Bunny - Tit√≠", f:"Tit√≠ me pregunt√≥ si tengo...", a:"muchas novias"},
    {t:"Cuco - Lo Que Siento", f:"Solo a ti te quiero...", a:"te amo"},
    {t:"Ariana - The Boy Is Mine", f:"Please separate it boy...", a:"i'm reading your mind"}
];
function initCanciones() {
    const s = canciones[sIdx]; document.getElementById('titL').innerText = s.t;
    document.getElementById('fraseL').innerText = s.f;
    let ops = [s.a, "all the way", "nobody", "the boy"].sort(()=>Math.random()-0.5);
    document.getElementById('optsL').innerHTML = ops.map(o => `<button class="btn" onclick="checkS('${o}')">${o}</button>`).join('');
}
window.checkS = (a) => { if(a===canciones[sIdx].a){ sIdx++; if(sIdx<canciones.length) initCanciones(); else mostrar('cartaFinal'); } };
initCanciones();

</script>
</body>
</html>
